import{r as m,u as E,o as V,c as x,b as l,d as e,f as _,c1 as P,E as i,c2 as y}from"./index-Bj1V9wew.js";import{a as U,E as C}from"./el-col-Bj9h8nFc.js";import{E as k,a as F}from"./el-form-item-hqDUE-e0.js";import{_ as N,E as R}from"./_plugin-vue_export-helper-CSCWavwd.js";import{E as S}from"./el-input-Ir-TF5pQ.js";import{P as q}from"./PageContainer-BCHFLDVD.js";import"./el-message-BNTB1Kf7.js";const B={__name:"UserPassword",setup(I){const u=m(null),r=m({old_pwd:"",new_pwd:"",re_pwd:""}),w={old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6 到 15 个字符之间",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6 到 15 个字符之间",trigger:"blur"},{validator:(s,o,a)=>{r.value.old_pwd===r.value.new_pwd?a(new Error("原密码和新密码不能一样")):a()},trigger:"blur"}],re_pwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6 到 15 个字符之间",trigger:"blur"},{validator:(s,o,a)=>{r.value.new_pwd!==o?a(new Error("新密码与确认密码不一致")):a()},trigger:"blur"}]},n=E(),f=async()=>{await u.value.validate(async s=>{if(s)await P(r.value),i.success("密码修改成功"),n.setToken(""),n.setUser({}),y.push("/login");else return i.error("密码修改失败"),!1})},c=()=>{u.value.resetFields()};return(s,o)=>{const a=S,d=k,p=R,g=F,v=U,b=C;return V(),x(q,{title:"重置密码"},{default:l(()=>[e(b,null,{default:l(()=>[e(v,{span:12},{default:l(()=>[e(g,{model:r.value,rules:w,ref_key:"formRef",ref:u,"label-width":"120px",class:"form-container"},{default:l(()=>[e(d,{label:"原密码",prop:"old_pwd"},{default:l(()=>[e(a,{type:"password",modelValue:r.value.old_pwd,"onUpdate:modelValue":o[0]||(o[0]=t=>r.value.old_pwd=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"新密码",prop:"new_pwd"},{default:l(()=>[e(a,{type:"password",modelValue:r.value.new_pwd,"onUpdate:modelValue":o[1]||(o[1]=t=>r.value.new_pwd=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"确认密码",prop:"re_pwd"},{default:l(()=>[e(a,{type:"password",modelValue:r.value.re_pwd,"onUpdate:modelValue":o[2]||(o[2]=t=>r.value.re_pwd=t)},null,8,["modelValue"])]),_:1}),e(d,null,{default:l(()=>[e(p,{type:"primary",onClick:f},{default:l(()=>[_("修改密码")]),_:1}),e(p,{onClick:c},{default:l(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}},H=N(B,[["__scopeId","data-v-508fcb2c"]]);export{H as default};
